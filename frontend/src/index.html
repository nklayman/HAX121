<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hax121</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="script.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <!--Font imports-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans:600&display=swap" rel="stylesheet" />
  </head>

  <body>
    <div class="background">
      <nav class="nav" id="nav">
        <ul>
          <div class="right">
            <li><button class="signUpButton" href="#">SIGN UP</button></li>
            <li><a href="#">HOME</a></li>
            <li><a href="#">CONTACT</a></li>
            <li><a href="#">ABOUT</a></li>
          </div>
          <li style="float:left">
            <img class="logo" href="#" src="img/logo.svg" />
          </li>
        </ul>
      </nav>
      <div class="Text" id="intro">
        <h1>BRING IT ON</h1>
        <hr color="#ffffff" />
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean non eros egestas, facilisis mauris fringilla, auctor magna. In hac habitasse platea dictumst. Sed ac elit felis. Maecenas hendrerit vel ipsum eget accumsan. Etiam id egestas orci. Pellentesque ut erat a ligula elementum tempus. Morbi dignissim felis vitae risus
        </p>
        <button class="signUpButton" href="#">Sign Up</button>
      </div>

      <div class="Text" id="HaxInfo">
        <h1>HAX121</h1>
        <hr color="#ffffff" />
        <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean non eros egestas, facilisis mauris fringilla, auctor magna. In hac habitasse platea dictumst. Sed ac elit felis. Maecenas hendrerit vel ipsum eget accumsan. Etiam id egestas orci. Pellentesque ut erat a ligula elementum tempus. Morbi dignissim felis vitae risus Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean non eros egestas, facilisis mauris fringilla, auctor magna. In hac habitasse platea dictumst. Sed ac elit felis. Maecenas hendrerit vel ipsum eget accumsan. Etiam id egestas orci. Pellentesque ut erat a ligula elementum tempus. Morbi dignissim felis vitae risus
        </p>
      </div>
    </div>

    <div class="form" id="signUpFormDiv">
      <h1>SIGN UP</h1>
      <p>Please fill in this form to create an account.</p>
      <hr />

      <form id="signUpForm" style="border:1px solid #ccc">
        <div class="container">
          <label for="firstName"><b>First Name</b></label>
          <input type="text" name="firstName" required />

          <label for="lastName"><b>Last Name</b></label>
          <input type="text" name="lastName" required />

          <label for="school"><b>School Name</b></label>
          <input type="text" name="school" required />

          <label for="grade"><b>Grade Level</b></label>
          <input type="text" name="grade" required />

          <label for="email"><b>Email</b></label>
          <input type="text" name="email" required />

          <label for="phoneNumber"><b>Phone Number</b></label>
          <input type="text" name="phoneNumber" required />

          <form>
            <label for="firstTime"><b>First Time Hacker?</b></label>
            <input type="radio" name="firstTime" value="yes" checked />
            Yes<br />
            <input type="radio" name="firstTime" value="no" /> No<br />
          </form>

          <label for="yearsExperience"><b>Years of Computer Science Experience</b></label>
          <select name="yearsExperience" required>
            <option value="underOne">Less than 1</option>
            <option value="oneToTwo">1-2</option>
            <option value="threeToFour">3-4</option>
            <option value="fiveToSix">5-6</option>
            <option value="sevenToEight">7-8</option>
            <option value="eightPlus">8+</option>
          </select>

          <label for="shirtSize"><b>Shirt Size</b></label>
          <select name="shirtSize" required>
            <option value="xs">XS</option>
            <option value="s">S</option>
            <option value="m">M</option>
            <option value="l">L</option>
            <option value="xl">XL</option>
          </select>

          <label for="dietaryPref"><b>Dietary preferences? (Vegan, Vegetarian, etc)</b></label>
          <select name="dietaryPref">
            <option value="none">None</option>
            <option value="Vegetarian">Vegetarian</option>
            <option value="Vegan">Vegan</option>
          </select>

          <label for="foodAlergies"><b>Food Alergies?</b></label>
          <input type="text" name="foodAllergies" required />

          <label for="emergencyContact"><b>Emergency Contact Information:</b></label>
          <input type="text" name="contactName" required />
          <input type="text" name="contactRelation" required />
          <input type="text" name="contactNumber" required />
          <input type="text" name="contactEmail" required />

          <label for="survey"><b>How did you hear about us?</b></label>
          <input type="text" name="survey" required />

          <p>
            By creating an account you agree to our
            <a href="#" style="color:dodgerblue">Terms & Privacy</a>.
          </p>

          <div class="clearfix">
            <button type="button" class="cancelbtn">Cancel</button>
            <button type="submit" class="signupbtn">Sign Up</button>
          </div>
        </div>
      </form>
    </div>

    <section class="landing"></section>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
      $("#signUpForm").submit(function(event) {
        event.preventDefault();

        var $inputs = $("#signUpForm :input");
        var values = {};
        $inputs.each(function() {
          if (this.name) {
            values[this.name] = $(this).val();
          }
        });

        var requestBody = {
          first_name: values.firstName,
          last_name: values.lastName,
          school: values.school,
          grade: values.grade,
          email: values.email,
          shirt_size: values.shirtSize,
          allergy: values.foodAllergies,
          diet_restriction: values.dietaryPref,
          experience: values.yearsExperience,
          first_time: values.firstTime === "yes",
          phone_number: values.phoneNumber
        };

        // Create Student
        $.ajax({
          type: "POST",
          url: "http://localhost:9121/api/students",
          data: requestBody,
          success: function(data, status, request) {
            console.log(data);

            // Create Emergency Contact
            var contact = {
              name: values.contactName,
              relation: values.contactRelation,
              phone_number: values.contactNumber,
              email: values.contactEmail,
              student_id: data.id
            };

            $.ajax({
              type: "POST",
              url: "http://localhost:9121/api/emergencycontacts",
              data: contact,
              success: function(data, status, request) {
                console.log(data);
                // TODO: Student registered, display message
              },
              error: function(request, status, error) {
                console.log(error);
                // TODO: Error when creating emergency contact, display error
              },
              dataType: "json"
            });
          },
          error: function(request, status, error) {
            console.log(error);
            // TODO: Error when creating student, display error
          },
          dataType: "json"
        });

        return false;
      });
    </script>
  </body>
</html>
